# 第九课 遥控小车（上）  
——用Arduino驱动电机实现基础运动控制  

---

## **课程目标**  
1. **理解电机工作原理**：学习直流电机如何将电能转化为机械能。  
2. **掌握L298N驱动板用法**：学会通过驱动板控制电机正反转与调速。  
3. **动手实践**：完成电机驱动实验，制作可旋转的小风扇。  
4. **应用拓展**：探索电机在智能家居、工业自动化中的实际应用。  

---

## **硬件清单与功能说明**  
| 名称                     | 数量 | 作用与注意事项                                               |
| ------------------------ | ---- | ------------------------------------------------------------ |
| Arduino UNO主板          | 1    | 主控核心，输出PWM信号控制电机转速。                          |
| L298N电机驱动板          | 1    | 提供大电流驱动电机，支持双电机控制。                         |
| 130直流电机              | 1    | 需连接驱动板输出端，正反转由输入信号方向决定。               |
| 小风扇叶片               | 1    | 安装在电机轴上，直观展示转动效果。                           |
| 杜邦线（公对公、公对母） | 若干 | 连接主板、驱动板与电机。（推荐使用红色代表正极，黑色代表负极便于区分） |
| 螺丝刀                   | 1    | 固定驱动板接线端子。                                         |
| USB数据线                | 1    | 上传程序并为Arduino供电。                                    |

---

## **第一部分：电机与驱动板原理**  
### **1. 直流电机的工作原理**  
- **电磁驱动**：电流通过线圈产生磁场，与永磁体相互作用，推动转子旋转。  
- **换向器作用**：周期性切换电流方向，确保转子持续转动（类似“接力赛”）。  
- ![直流电机](https://img0.baidu.com/it/u=3297611606,2383263605&fm=253&fmt=auto&app=138&f=JPEG?w=640&h=480)

### **2. L298N驱动板的功能**  
**放大电流**：Arduino输出信号电流较弱，驱动板可提供更高电流驱动电机。  

**控制逻辑**：  

**输入信号**：IN1、IN2、IN3、IN4控制电机方向（如IN1=高电平，IN2=低电平 → 正转）。  

**使能端（ENA）**：连接PWM针脚，通过调节占空比控制转速。  

![L298N驱动板](https://i-blog.csdnimg.cn/direct/504a726a15b94220bb4879b3824749a2.png)

### 3.目标系统设计

- **控制器**：Arduino UNO 主板
- **执行器**：130直流电机

---

## **第二部分：硬件连接与电路设计**  
### **1. L298N驱动板引脚说明**  
| 引脚                             | 功能说明                                                     |
| -------------------------------- | ------------------------------------------------------------ |
| +12V                             | 外接电源正极（可选，小功率电机可直接用Arduino 5V）。         |
| GND                              | 接地，需与Arduino共地。                                      |
| OUTA1、OUTA2、<br />OUTB1、OUTB2 | 连接电机两端，控制正反转,信号从L298N驱动板内部流向外部的电机。 |
| IN1、IN2、IN3、IN4               | 接Arduino数字针脚（如5、6、7、8号），控制方向，信号从外部控制器流向L298N驱动板的这些引脚。 |

### **2. 完整电路连接步骤**  
1. **驱动板供电**：  
   - 若使用外接电源：+12V接电池正极，GND接电池负极。 (注意驱动板需要与主板共地) 
   - 若使用Arduino供电：+12V接Arduino 5V，GND接Arduino GND。  
2. **控制信号连接**：  
   - IN1 → 5号针脚，IN2 → 6号针脚 ，IN3 → 7号针脚，IN4 → 8号针脚
3. **电机连接**：  
   - 电机两端 → OUTA1、OUTA2。  

✅ **电路示意图**：  
```  
Arduino UNO  
│  
├─ 5号针脚 → IN1  
├─ 6号针脚 → IN2  
├─ 7号针脚 → IN3
├─ 8号针脚 → IN4
├─ 5V → L298N +12V（小功率供电）  
└─ GND → L298N GND  
```

---

## **第三部分：Linkboy编程——电机基础控制**  
### **1. 虚拟电路搭建**  
1. 打开Linkboy，拖入以下模块：  
   - **Arduino UNO主板**（主控板 → Arduino Nano/Uno）。  
   - **L298N驱动板**（驱动输出 → 电机驱动器 → L298N）。  
   - **130直流电机**（驱动输出 → 马达和舵机 → 直流电机）。  
2. **连线步骤**：   
   - 主板**5号针脚** →  IN1，**6号针脚** → IN2，**7号针脚** →  IN3，8**号针脚** → IN4。  
   - L298N OUTA1、OUTA2 → 电机两端。  

### **2. 编写电机控制程序**  
1. **主程序逻辑**：  
   
   ```plaintext  
   初始化：  
     设置 马达|设置功率为100  
     设置 马达|正转
     
     
   ```
   
2. **具体操作**：  
   
   - 在控制器|初始化中设置马达|设置功率为100，同时设置马达|正转。  
   
3. **仿真测试**：点击“仿真”，观察虚拟电机是否持续正转。  

---

## **第四部分：实战操作——组装与调试**  
### **1. 硬件组装步骤**  
1. **固定电机与叶片**：将风扇叶片安装在电机轴上，确保旋转平衡。  
2. **连接驱动板**：  
   - 用螺丝刀拧紧驱动板接线端子，避免接触不良。  
   - 电机线插入OUT1、OUT2，杜邦线连接控制信号针脚。  

✅ **检查要点**：  
- 驱动板供电稳定（若电机抖动，需外接电池）。  
- 确保IN1的信号方向正确（连接的引脚与程序设置无误）。  
- 这一步骤一定要认真完成，如果连接错误，主板在通电后很可能会烧坏，一定要注意安全！

### **2. 上传程序与测试**  
1. 用USB线连接Arduino与电脑，选择正确串口号上传程序。  
2. 观察现象：  
   - 电机带动风扇叶片匀速旋转。  
   - 调整马达设置功率为50，测试转速是否减半。  

---

## **第五部分：常见问题与解决方法**  
| 问题       | 可能原因              | 解决方案                         |
| ---------- | --------------------- | -------------------------------- |
| 电机不转   | 供电不足或信号接反    | 外接电源或检查引脚设置。         |
| 电机抖动   | PWM信号干扰或接触不良 | 检查接线是否松动，添加滤波电容。 |
| 驱动板发热 | 电流过大或散热不足    | 降低电机负载，增加散热片。       |

---

## **第六部分：知识延伸与创意挑战**  
### **1. 电机的实际应用**  
- **智能家居**：驱动智能窗帘、自动喂食器。  
- **工业自动化**：控制传送带、机械臂运动。  

### **2. 动手挑战**  
- **任务1**：添加按钮控制电机正反转（需修改程序逻辑）。  
- **任务2**：结合超声波传感器，制作“遇障停机”（需扩展硬件）。  

---

## **课后作业**  
1. **实践任务**：完成电机驱动实验，录制风扇旋转视频。  
2. **思考题**：如何通过遥控器控制电机转速？  

---

**下节预告**：学习双电机控制与差速转向，制作“全向移动遥控小车”！  

---
**作者寄语**：电机是机械世界的动力之源，愿你的每一次转动都能驱动未来的无限可能！ 🚗⚡